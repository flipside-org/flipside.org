(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r={}.hasOwnProperty,s=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};e={is_unordered:!1,is_counting:!1,is_exclusive:!1,is_solitary:!1,prevent_default:!1,prevent_repeat:!1},p="meta alt option ctrl shift cmd".split(" "),n="ctrl",window.keypress={},keypress.debug=!1;var t=function(a){var b,c;for(b in a)r.call(a,b)&&(c=a[b],!1!==c&&(this[b]=c));this.keys=this.keys||[],this.count=this.count||0};t.prototype.allows_key_repeat=function(){return!this.prevent_repeat&&"function"==typeof this.on_keydown},t.prototype.reset=function(){return this.count=0,this.keyup_fired=null};var u=keypress,v=function(a,b){var c,d,f=this;this.should_force_event_defaults=this.should_suppress_event_defaults=!1,this.sequence_delay=800,this._registered_combos=[],this._keys_down=[],this._active_combos=[],this._sequence=[],this._sequence_timer=null,this._prevent_capture=!1,this._defaults=b||{};for(c in e)r.call(e,c)&&(d=e[c],this._defaults[c]=this._defaults[c]||d);a=a||document.body,c=function(a,b,c){return a.addEventListener?a.addEventListener(b,c):a.attachEvent?a.attachEvent("on"+b,c):void 0},c(a,"keydown",function(a){return a=a||window.event,f._receive_input(a,!0),f._bug_catcher(a)}),c(a,"keyup",function(a){return a=a||window.event,f._receive_input(a,!1)}),c(window,"blur",function(){var a,b,c,d;for(d=f._keys_down,b=0,c=d.length;c>b;b++)a=d[b],f._key_up(a,{});return f._keys_down=[]})};v.prototype._bug_catcher=function(a){var b;return"cmd"===n&&0<=s.call(this._keys_down,"cmd")&&"cmd"!==(b=c(a.keyCode))&&"shift"!==b&&"alt"!==b&&"caps"!==b&&"tab"!==b?this._receive_input(a,!1):void 0},v.prototype._cmd_bug_check=function(a){return"cmd"===n&&0<=s.call(this._keys_down,"cmd")&&0>s.call(a,"cmd")?!1:!0},v.prototype._prevent_default=function(a,b){return(b||this.should_suppress_event_defaults)&&!this.should_force_event_defaults&&(a.preventDefault?a.preventDefault():a.returnValue=!1,a.stopPropagation)?a.stopPropagation():void 0},v.prototype._get_active_combos=function(a){var b,c,d=this;return b=[],c=f(this._keys_down,function(b){return b!==a}),c.push(a),this._match_combo_arrays(c,function(a){return d._cmd_bug_check(a.keys)?b.push(a):void 0}),this._fuzzy_match_combo_arrays(c,function(a){return 0<=s.call(b,a)||a.is_solitary||!d._cmd_bug_check(a.keys)?void 0:b.push(a)}),b},v.prototype._get_potential_combos=function(a){var b,c,d,e,f;for(c=[],f=this._registered_combos,d=0,e=f.length;e>d;d++)b=f[d],b.is_sequence||0<=s.call(b.keys,a)&&this._cmd_bug_check(b.keys)&&c.push(b);return c},v.prototype._add_to_active_combos=function(a){var b,c,d,e,f,g,h,i,j,k,l;if(g=!1,f=!0,d=!1,0<=s.call(this._active_combos,a))return!0;if(this._active_combos.length)for(e=h=0,k=this._active_combos.length;k>=0?k>h:h>k;e=k>=0?++h:--h)if((b=this._active_combos[e])&&b.is_exclusive&&a.is_exclusive){if(b=b.keys,!g)for(i=0,j=b.length;j>i;i++)if(c=b[i],g=!0,0>s.call(a.keys,c)){g=!1;break}if(f&&!g)for(l=a.keys,i=0,j=l.length;j>i;i++)if(c=l[i],f=!1,0>s.call(b,c)){f=!0;break}g&&(d?(b=this._active_combos.splice(e,1)[0],null!=b&&b.reset()):(b=this._active_combos.splice(e,1,a)[0],null!=b&&b.reset(),d=!0),f=!1)}return f&&this._active_combos.unshift(a),g||f},v.prototype._remove_from_active_combos=function(a){var b,c,d,e;for(c=d=0,e=this._active_combos.length;e>=0?e>d:d>e;c=e>=0?++d:--d)if(b=this._active_combos[c],b===a){a=this._active_combos.splice(c,1)[0],a.reset();break}},v.prototype._get_possible_sequences=function(){var a,b,c,d,e,g,h,i,j,k,l,m;for(d=[],k=this._registered_combos,g=0,j=k.length;j>g;g++)for(a=k[g],b=h=1,l=this._sequence.length;l>=1?l>=h:h>=l;b=l>=1?++h:--h)if(e=this._sequence.slice(-b),a.is_sequence){if(0>s.call(a.keys,"shift")&&(e=f(e,function(a){return"shift"!==a}),!e.length))continue;for(b=i=0,m=e.length;m>=0?m>i:i>m;b=m>=0?++i:--i){if(a.keys[b]!==e[b]){c=!1;break}c=!0}c&&d.push(a)}return d},v.prototype._add_key_to_sequence=function(a,b){var c,d,e,f;if(this._sequence.push(a),d=this._get_possible_sequences(),d.length){for(e=0,f=d.length;f>e;e++)c=d[e],this._prevent_default(b,c.prevent_default);this._sequence_timer&&clearTimeout(this._sequence_timer),-1<this.sequence_delay&&(this._sequence_timer=setTimeout(function(){return this._sequence=[]},this.sequence_delay))}else this._sequence=[]},v.prototype._get_sequence=function(a){var b,c,d,e,g,h,i,j,k,l,m,n;for(l=this._registered_combos,h=0,k=l.length;k>h;h++)if(b=l[h],b.is_sequence){for(c=i=1,m=this._sequence.length;m>=1?m>=i:i>=m;c=m>=1?++i:--i)if(g=f(this._sequence,function(a){return 0<=s.call(b.keys,"shift")?!0:"shift"!==a}).slice(-c),b.keys.length===g.length)for(c=j=0,n=g.length;n>=0?n>j:j>n;c=n>=0?++j:--j)if(e=g[c],!(0>s.call(b.keys,"shift")&&"shift"===e||"shift"===a&&0>s.call(b.keys,"shift"))){if(b.keys[c]!==e){d=!1;break}d=!0}if(d)return b}return!1},v.prototype._receive_input=function(a,b){var d;if(this._prevent_capture)this._keys_down.length&&(this._keys_down=[]);else if(d=c(a.keyCode),(b||this._keys_down.length||!("alt"===d||d===n))&&d)return b?this._key_down(d,a):this._key_up(d,a)},v.prototype._fire=function(a,b,c,d){return"function"==typeof b["on_"+a]&&this._prevent_default(c,!0!==b["on_"+a].call(b["this"],c,b.count,d)),"release"===a&&(b.count=0),"keyup"===a?b.keyup_fired=!0:void 0},v.prototype._match_combo_arrays=function(c,d){var e,f,g,h;for(h=this._registered_combos,f=0,g=h.length;g>f;f++)e=h[f],(!e.is_unordered&&b(c,e.keys)||e.is_unordered&&a(c,e.keys))&&d(e)},v.prototype._fuzzy_match_combo_arrays=function(a,b){var c,d,e,f;for(f=this._registered_combos,d=0,e=f.length;e>d;d++)c=f[d],(!c.is_unordered&&h(c.keys,a)||c.is_unordered&&g(c.keys,a))&&b(c)},v.prototype._keys_remain=function(a){var b,c,d,e;for(e=a.keys,c=0,d=e.length;d>c;c++)if(a=e[c],0<=s.call(this._keys_down,a)){b=!0;break}return b},v.prototype._key_down=function(a,b){var c,e,f,g,h;(c=d(a,b))&&(a=c),this._add_key_to_sequence(a,b),(c=this._get_sequence(a))&&this._fire("keydown",c,b);for(f in o)c=o[f],b[c]&&(f===a||0<=s.call(this._keys_down,f)||this._keys_down.push(f));for(f in o)if(c=o[f],f!==a&&0<=s.call(this._keys_down,f)&&!b[c]&&!("cmd"===f&&"cmd"!==n))for(c=e=0,g=this._keys_down.length;g>=0?g>e:e>g;c=g>=0?++e:--e)this._keys_down[c]===f&&this._keys_down.splice(c,1);for(e=this._get_active_combos(a),f=this._get_potential_combos(a),g=0,h=e.length;h>g;g++)c=e[g],this._handle_combo_down(c,f,a,b);if(f.length)for(e=0,g=f.length;g>e;e++)c=f[e],this._prevent_default(b,c.prevent_default);0>s.call(this._keys_down,a)&&this._keys_down.push(a)},v.prototype._handle_combo_down=function(a,b,c,d){var e,f,g,h,i;if(0>s.call(a.keys,c))return!1;if(this._prevent_default(d,a&&a.prevent_default),e=!1,0<=s.call(this._keys_down,c)&&(e=!0,!a.allows_key_repeat()))return!1;if(g=this._add_to_active_combos(a,c),c=a.keyup_fired=!1,a.is_exclusive)for(h=0,i=b.length;i>h;h++)if(f=b[h],f.is_exclusive&&f.keys.length>a.keys.length){c=!0;break}return!c&&(a.is_counting&&"function"==typeof a.on_keydown&&(a.count+=1),g)?this._fire("keydown",a,d,e):void 0},v.prototype._key_up=function(a,b){var c,e,f,g,h,i;if(c=a,(f=d(a,b))&&(a=f),f=l[c],b.shiftKey?f&&0<=s.call(this._keys_down,f)||(a=c):c&&0<=s.call(this._keys_down,c)||(a=f),(g=this._get_sequence(a))&&this._fire("keyup",g,b),0>s.call(this._keys_down,a))return!1;for(g=h=0,i=this._keys_down.length;i>=0?i>h:h>i;g=i>=0?++h:--h)if((e=this._keys_down[g])===a||e===f||e===c){this._keys_down.splice(g,1);break}for(e=this._active_combos.length,f=[],i=this._active_combos,g=0,h=i.length;h>g;g++)c=i[g],0<=s.call(c.keys,a)&&f.push(c);for(g=0,h=f.length;h>g;g++)c=f[g],this._handle_combo_up(c,b,a);if(e>1)for(h=this._active_combos,e=0,g=h.length;g>e;e++)c=h[e],void 0===c||0<=s.call(f,c)||this._keys_remain(c)||this._remove_from_active_combos(c)},v.prototype._handle_combo_up=function(b,c,d){var e,f;this._prevent_default(c,b&&b.prevent_default),f=this._keys_remain(b),b.keyup_fired||(e=this._keys_down.slice(),e.push(d),b.is_solitary&&!a(e,b.keys))||(this._fire("keyup",b,c),b.is_counting&&"function"==typeof b.on_keyup&&"function"!=typeof b.on_keydown&&(b.count+=1)),f||(this._fire("release",b,c),this._remove_from_active_combos(b))},v.prototype.simple_combo=function(a,b){return this.register_combo({keys:a,on_keydown:b})},v.prototype.counting_combo=function(a,b){return this.register_combo({keys:a,is_counting:!0,is_unordered:!1,on_keydown:b})},v.prototype.sequence_combo=function(a,b){return this.register_combo({keys:a,on_keydown:b,is_sequence:!0})},v.prototype.register_combo=function(a){var b,c,d;"string"==typeof a.keys&&(a.keys=a.keys.split(" ")),d=this._defaults;for(b in d)r.call(d,b)&&(c=d[b],void 0===a[b]&&(a[b]=c));return a=new t(a),q(a)?(this._registered_combos.push(a),!0):void 0},v.prototype.register_many=function(a){var b,c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(this.register_combo(b));return e},v.prototype.unregister_combo=function(c){var d,e,f,g,h,i=this;if(!c)return!1;if(e=function(a){var b,c,d,e;for(e=[],b=c=0,d=i._registered_combos.length;d>=0?d>c:c>d;b=d>=0?++c:--c){if(a===i._registered_combos[b]){i._registered_combos.splice(b,1);break}e.push(void 0)}return e},c.keys)return e(c);for(h=this._registered_combos,f=0,g=h.length;g>f;f++)d=h[f];return"string"==typeof c&&(c=c.split(" ")),d.is_unordered&&a(c,d.keys)||!d.is_unordered&&b(c,d.keys)?e(d):void 0},v.prototype.unregister_many=function(a){var b,c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(this.unregister_combo(b));return e},v.prototype.get_registered_combos=function(){return this._registered_combos},v.prototype.reset=function(){return this._registered_combos=[]},v.prototype.listen=function(){return this._prevent_capture=!1},v.prototype.stop_listening=function(){return this._prevent_capture=!0},v.prototype.get_meta_key=function(){return n},u.Listener=v,c=function(a){return k[a]},f=function(a,b){var c;if(a.filter)return a.filter(b);var d,e,f;for(f=[],d=0,e=a.length;e>d;d++)c=a[d],b(c)&&f.push(c);return f},a=function(a,b){var c,d,e;if(a.length!==b.length)return!1;for(d=0,e=a.length;e>d;d++)if(c=a[d],!(0<=s.call(b,c)))return!1;return!0},b=function(a,b){var c,d,e;if(a.length!==b.length)return!1;for(c=d=0,e=a.length;e>=0?e>d:d>e;c=e>=0?++d:--d)if(a[c]!==b[c])return!1;return!0},g=function(a,b){var c,d,e;for(d=0,e=a.length;e>d;d++)if(c=a[d],0>s.call(b,c))return!1;return!0},h=function(a,b){var c,d,e,f;for(e=d=0,f=a.length;f>e;e++){if(c=a[e],c=b.indexOf(c),!(c>=d))return!1;d=c}return!0},m=function(){return keypress.debug?console.log.apply(console,arguments):void 0},i=function(a){var b,c,d;b=!1;for(d in k)if(c=k[d],a===c){b=!0;break}if(!b)for(d in l)if(c=l[d],a===c){b=!0;break}return b},q=function(a){var b,c,d,f,g,h,k;for(g=!0,a.keys.length||m("You're trying to bind a combo with no keys:",a),c=h=0,k=a.keys.length;k>=0?k>h:h>k;c=k>=0?++h:--h)d=a.keys[c],(b=j[d])&&(d=a.keys[c]=b),"meta"===d&&a.keys.splice(c,1,n),"cmd"===d&&m('Warning: use the "meta" key rather than "cmd" for Windows compatibility');for(k=a.keys,b=0,h=k.length;h>b;b++)d=k[b],i(d)||(m('Do not recognize the key "'+d+'"'),g=!1);if(0<=s.call(a.keys,"meta")||0<=s.call(a.keys,"cmd")){for(b=a.keys.slice(),h=0,k=p.length;k>h;h++)d=p[h],-1<(c=b.indexOf(d))&&b.splice(c,1);1<b.length&&(m("META and CMD key combos cannot have more than 1 non-modifier keys",a,b),g=!1)}for(f in a)"undefined"===e[f]&&m("The property "+f+" is not a valid combo property. Your combo has still been registered.");return g},d=function(a,b){var c;return b.shiftKey?(c=l[a],null!=c?c:!1):!1},o={cmd:"metaKey",ctrl:"ctrlKey",shift:"shiftKey",alt:"altKey"},j={escape:"esc",control:"ctrl",command:"cmd","break":"pause",windows:"cmd",option:"alt",caps_lock:"caps",apostrophe:"'",semicolon:";",tilde:"~",accent:"`",scroll_lock:"scroll",num_lock:"num"},l={"/":"?",".":">",",":"<","'":'"',";":":","[":"{","]":"}","\\":"|","`":"~","=":"+","-":"_",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")"},k={0:"\\",8:"backspace",9:"tab",12:"num",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",44:"print",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",91:"cmd",92:"cmd",93:"cmd",96:"num_0",97:"num_1",98:"num_2",99:"num_3",100:"num_4",101:"num_5",102:"num_6",103:"num_7",104:"num_8",105:"num_9",106:"num_multiply",107:"num_add",108:"num_enter",109:"num_subtract",110:"num_decimal",111:"num_divide",124:"print",144:"num",145:"scroll",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",223:"`",224:"cmd",225:"alt",57392:"ctrl",63289:"num"},-1!==navigator.userAgent.indexOf("Mac OS X")&&(n="cmd"),-1!==navigator.userAgent.indexOf("Opera")&&(k[17]="cmd")}).call(this),function(){function a(a){var c=!1;return function(){if(c)throw new Error("Callback was already called.");c=!0,a.apply(b,arguments)}}var b,c,d={};b=this,null!=b&&(c=b.async),d.noConflict=function(){return b.async=c,d};var e=function(a,b){if(a.forEach)return a.forEach(b);for(var c=0;c<a.length;c+=1)b(a[c],c,a)},f=function(a,b){if(a.map)return a.map(b);var c=[];return e(a,function(a,d,e){c.push(b(a,d,e))}),c},g=function(a,b,c){return a.reduce?a.reduce(b,c):(e(a,function(a,d,e){c=b(c,a,d,e)}),c)},h=function(a){if(Object.keys)return Object.keys(a);var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b};"undefined"!=typeof process&&process.nextTick?(d.nextTick=process.nextTick,d.setImmediate="undefined"!=typeof setImmediate?function(a){setImmediate(a)}:d.nextTick):"function"==typeof setImmediate?(d.nextTick=function(a){setImmediate(a)},d.setImmediate=d.nextTick):(d.nextTick=function(a){setTimeout(a,0)},d.setImmediate=d.nextTick),d.each=function(b,c,d){if(d=d||function(){},!b.length)return d();var f=0;e(b,function(e){c(e,a(function(a){a?(d(a),d=function(){}):(f+=1,f>=b.length&&d(null))}))})},d.forEach=d.each,d.eachSeries=function(a,b,c){if(c=c||function(){},!a.length)return c();var d=0,e=function(){b(a[d],function(b){b?(c(b),c=function(){}):(d+=1,d>=a.length?c(null):e())})};e()},d.forEachSeries=d.eachSeries,d.eachLimit=function(a,b,c,d){var e=i(b);e.apply(null,[a,c,d])},d.forEachLimit=d.eachLimit;var i=function(a){return function(b,c,d){if(d=d||function(){},!b.length||0>=a)return d();var e=0,f=0,g=0;!function h(){if(e>=b.length)return d();for(;a>g&&f<b.length;)f+=1,g+=1,c(b[f-1],function(a){a?(d(a),d=function(){}):(e+=1,g-=1,e>=b.length?d():h())})}()}},j=function(a){return function(){var b=Array.prototype.slice.call(arguments);return a.apply(null,[d.each].concat(b))}},k=function(a,b){return function(){var c=Array.prototype.slice.call(arguments);return b.apply(null,[i(a)].concat(c))}},l=function(a){return function(){var b=Array.prototype.slice.call(arguments);return a.apply(null,[d.eachSeries].concat(b))}},m=function(a,b,c,d){var e=[];b=f(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c,d){e[a.index]=d,b(c)})},function(a){d(a,e)})};d.map=j(m),d.mapSeries=l(m),d.mapLimit=function(a,b,c,d){return n(b)(a,c,d)};var n=function(a){return k(a,m)};d.reduce=function(a,b,c,e){d.eachSeries(a,function(a,d){c(b,a,function(a,c){b=c,d(a)})},function(a){e(a,b)})},d.inject=d.reduce,d.foldl=d.reduce,d.reduceRight=function(a,b,c,e){var g=f(a,function(a){return a}).reverse();d.reduce(g,b,c,e)},d.foldr=d.reduceRight;var o=function(a,b,c,d){var e=[];b=f(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c){c&&e.push(a),b()})},function(){d(f(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};d.filter=j(o),d.filterSeries=l(o),d.select=d.filter,d.selectSeries=d.filterSeries;var p=function(a,b,c,d){var e=[];b=f(b,function(a,b){return{index:b,value:a}}),a(b,function(a,b){c(a.value,function(c){c||e.push(a),b()})},function(){d(f(e.sort(function(a,b){return a.index-b.index}),function(a){return a.value}))})};d.reject=j(p),d.rejectSeries=l(p);var q=function(a,b,c,d){a(b,function(a,b){c(a,function(c){c?(d(a),d=function(){}):b()})},function(){d()})};d.detect=j(q),d.detectSeries=l(q),d.some=function(a,b,c){d.each(a,function(a,d){b(a,function(a){a&&(c(!0),c=function(){}),d()})},function(){c(!1)})},d.any=d.some,d.every=function(a,b,c){d.each(a,function(a,d){b(a,function(a){a||(c(!1),c=function(){}),d()})},function(){c(!0)})},d.all=d.every,d.sortBy=function(a,b,c){d.map(a,function(a,c){b(a,function(b,d){b?c(b):c(null,{value:a,criteria:d})})},function(a,b){if(a)return c(a);var d=function(a,b){var c=a.criteria,d=b.criteria;return d>c?-1:c>d?1:0};c(null,f(b.sort(d),function(a){return a.value}))})},d.auto=function(a,b){b=b||function(){};var c=h(a);if(!c.length)return b(null);var f={},i=[],j=function(a){i.unshift(a)},k=function(a){for(var b=0;b<i.length;b+=1)if(i[b]===a)return void i.splice(b,1)},l=function(){e(i.slice(0),function(a){a()})};j(function(){h(f).length===c.length&&(b(null,f),b=function(){})}),e(c,function(c){var i=a[c]instanceof Function?[a[c]]:a[c],m=function(a){var g=Array.prototype.slice.call(arguments,1);if(g.length<=1&&(g=g[0]),a){var i={};e(h(f),function(a){i[a]=f[a]}),i[c]=g,b(a,i),b=function(){}}else f[c]=g,d.setImmediate(l)},n=i.slice(0,Math.abs(i.length-1))||[],o=function(){return g(n,function(a,b){return a&&f.hasOwnProperty(b)},!0)&&!f.hasOwnProperty(c)};if(o())i[i.length-1](m,f);else{var p=function(){o()&&(k(p),i[i.length-1](m,f))};j(p)}})},d.waterfall=function(a,b){if(b=b||function(){},a.constructor!==Array){var c=new Error("First argument to waterfall must be an array of functions");return b(c)}if(!a.length)return b();var e=function(a){return function(c){if(c)b.apply(null,arguments),b=function(){};else{var f=Array.prototype.slice.call(arguments,1),g=a.next();f.push(g?e(g):b),d.setImmediate(function(){a.apply(null,f)})}}};e(d.iterator(a))()};var r=function(a,b,c){if(c=c||function(){},b.constructor===Array)a.map(b,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);c.length<=1&&(c=c[0]),b.call(null,a,c)})},c);else{var d={};a.each(h(b),function(a,c){b[a](function(b){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),d[a]=e,c(b)})},function(a){c(a,d)})}};d.parallel=function(a,b){r({map:d.map,each:d.each},a,b)},d.parallelLimit=function(a,b,c){r({map:n(b),each:i(b)},a,c)},d.series=function(a,b){if(b=b||function(){},a.constructor===Array)d.mapSeries(a,function(a,b){a&&a(function(a){var c=Array.prototype.slice.call(arguments,1);c.length<=1&&(c=c[0]),b.call(null,a,c)})},b);else{var c={};d.eachSeries(h(a),function(b,d){a[b](function(a){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),c[b]=e,d(a)})},function(a){b(a,c)})}},d.iterator=function(a){var b=function(c){var d=function(){return a.length&&a[c].apply(null,arguments),d.next()};return d.next=function(){return c<a.length-1?b(c+1):null},d};return b(0)},d.apply=function(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b.concat(Array.prototype.slice.call(arguments)))}};var s=function(a,b,c,d){var e=[];a(b,function(a,b){c(a,function(a,c){e=e.concat(c||[]),b(a)})},function(a){d(a,e)})};d.concat=j(s),d.concatSeries=l(s),d.whilst=function(a,b,c){a()?b(function(e){return e?c(e):void d.whilst(a,b,c)}):c()},d.doWhilst=function(a,b,c){a(function(e){return e?c(e):void(b()?d.doWhilst(a,b,c):c())})},d.until=function(a,b,c){a()?c():b(function(e){return e?c(e):void d.until(a,b,c)})},d.doUntil=function(a,b,c){a(function(e){return e?c(e):void(b()?c():d.doUntil(a,b,c))})},d.queue=function(b,c){function f(a,b,f,g){b.constructor!==Array&&(b=[b]),e(b,function(b){var e={data:b,callback:"function"==typeof g?g:null};f?a.tasks.unshift(e):a.tasks.push(e),a.saturated&&a.tasks.length===c&&a.saturated(),d.setImmediate(a.process)})}void 0===c&&(c=1);var g=0,h={tasks:[],concurrency:c,saturated:null,empty:null,drain:null,push:function(a,b){f(h,a,!1,b)},unshift:function(a,b){f(h,a,!0,b)},process:function(){if(g<h.concurrency&&h.tasks.length){var c=h.tasks.shift();h.empty&&0===h.tasks.length&&h.empty(),g+=1;var d=function(){g-=1,c.callback&&c.callback.apply(c,arguments),h.drain&&h.tasks.length+g===0&&h.drain(),h.process()},e=a(d);b(c.data,e)}},length:function(){return h.tasks.length},running:function(){return g}};return h},d.cargo=function(a,b){var c=!1,g=[],h={tasks:g,payload:b,saturated:null,empty:null,drain:null,push:function(a,c){a.constructor!==Array&&(a=[a]),e(a,function(a){g.push({data:a,callback:"function"==typeof c?c:null}),h.saturated&&g.length===b&&h.saturated()}),d.setImmediate(h.process)},process:function i(){if(!c){if(0===g.length)return void(h.drain&&h.drain());var d="number"==typeof b?g.splice(0,b):g.splice(0),j=f(d,function(a){return a.data});h.empty&&h.empty(),c=!0,a(j,function(){c=!1;var a=arguments;e(d,function(b){b.callback&&b.callback.apply(null,a)}),i()})}},length:function(){return g.length},running:function(){return c}};return h};var t=function(a){return function(b){var c=Array.prototype.slice.call(arguments,1);b.apply(null,c.concat([function(b){var c=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(b?console.error&&console.error(b):console[a]&&e(c,function(b){console[a](b)}))}]))}};d.log=t("log"),d.dir=t("dir"),d.memoize=function(a,b){var c={},d={};b=b||function(a){return a};var e=function(){var e=Array.prototype.slice.call(arguments),f=e.pop(),g=b.apply(null,e);g in c?f.apply(null,c[g]):g in d?d[g].push(f):(d[g]=[f],a.apply(null,e.concat([function(){c[g]=arguments;var a=d[g];delete d[g];for(var b=0,e=a.length;e>b;b++)a[b].apply(null,arguments)}])))};return e.memo=c,e.unmemoized=a,e},d.unmemoize=function(a){return function(){return(a.unmemoized||a).apply(null,arguments)}},d.times=function(a,b,c){for(var e=[],f=0;a>f;f++)e.push(f);return d.map(e,b,c)},d.timesSeries=function(a,b,c){for(var e=[],f=0;a>f;f++)e.push(f);return d.mapSeries(e,b,c)},d.compose=function(){var a=Array.prototype.reverse.call(arguments);return function(){var b=this,c=Array.prototype.slice.call(arguments),e=c.pop();d.reduce(a,c,function(a,c,d){c.apply(b,a.concat([function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);d(a,b)}]))},function(a,c){e.apply(b,[a].concat(c))})}};var u=function(a,b){var c=function(){var c=this,d=Array.prototype.slice.call(arguments),e=d.pop();return a(b,function(a,b){a.apply(c,d.concat([b]))},e)};if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return c.apply(this,d)}return c};d.applyEach=j(u),d.applyEachSeries=l(u),d.forever=function(a,b){function c(d){if(d){if(b)return b(d);throw d}a(c)}c()},"undefined"!=typeof define&&define.amd?define([],function(){return d}):"undefined"!=typeof module&&module.exports?module.exports=d:b.async=d}(),function(a){a.flexslider=function(b,c){var d=a(b);d.vars=a.extend({},a.flexslider.defaults,c);var e,f=d.vars.namespace,g=window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture,h=("ontouchstart"in window||g||window.DocumentTouch&&document instanceof DocumentTouch)&&d.vars.touch,i="click touchend MSPointerUp",j="",k="vertical"===d.vars.direction,l=d.vars.reverse,m=d.vars.itemWidth>0,n="fade"===d.vars.animation,o=""!==d.vars.asNavFor,p={},q=!0;a.data(b,"flexslider",d),p={init:function(){d.animating=!1,d.currentSlide=parseInt(d.vars.startAt?d.vars.startAt:0,10),isNaN(d.currentSlide)&&(d.currentSlide=0),d.animatingTo=d.currentSlide,d.atEnd=0===d.currentSlide||d.currentSlide===d.last,d.containerSelector=d.vars.selector.substr(0,d.vars.selector.search(" ")),d.slides=a(d.vars.selector,d),d.container=a(d.containerSelector,d),d.count=d.slides.length,d.syncExists=a(d.vars.sync).length>0,"slide"===d.vars.animation&&(d.vars.animation="swing"),d.prop=k?"top":"marginLeft",d.args={},d.manualPause=!1,d.stopped=!1,d.started=!1,d.startTimeout=null,d.transitions=!d.vars.video&&!n&&d.vars.useCSS&&function(){var a=document.createElement("div"),b=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var c in b)if(void 0!==a.style[b[c]])return d.pfx=b[c].replace("Perspective","").toLowerCase(),d.prop="-"+d.pfx+"-transform",!0;return!1}(),""!==d.vars.controlsContainer&&(d.controlsContainer=a(d.vars.controlsContainer).length>0&&a(d.vars.controlsContainer)),""!==d.vars.manualControls&&(d.manualControls=a(d.vars.manualControls).length>0&&a(d.vars.manualControls)),d.vars.randomize&&(d.slides.sort(function(){return Math.round(Math.random())-.5}),d.container.empty().append(d.slides)),d.doMath(),d.setup("init"),d.vars.controlNav&&p.controlNav.setup(),d.vars.directionNav&&p.directionNav.setup(),d.vars.keyboard&&(1===a(d.containerSelector).length||d.vars.multipleKeyboard)&&a(document).bind("keyup",function(a){var b=a.keyCode;if(!d.animating&&(39===b||37===b)){var c=39===b?d.getTarget("next"):37===b?d.getTarget("prev"):!1;d.flexAnimate(c,d.vars.pauseOnAction)}}),d.vars.mousewheel&&d.bind("mousewheel",function(a,b){a.preventDefault();var c=d.getTarget(0>b?"next":"prev");d.flexAnimate(c,d.vars.pauseOnAction)}),d.vars.pausePlay&&p.pausePlay.setup(),d.vars.slideshow&&d.vars.pauseInvisible&&p.pauseInvisible.init(),d.vars.slideshow&&(d.vars.pauseOnHover&&d.hover(function(){d.manualPlay||d.manualPause||d.pause()},function(){d.manualPause||d.manualPlay||d.stopped||d.play()}),d.vars.pauseInvisible&&p.pauseInvisible.isHidden()||(d.vars.initDelay>0?d.startTimeout=setTimeout(d.play,d.vars.initDelay):d.play())),o&&p.asNav.setup(),h&&d.vars.touch&&p.touch(),(!n||n&&d.vars.smoothHeight)&&a(window).bind("resize orientationchange focus",p.resize),d.find("img").attr("draggable","false"),setTimeout(function(){d.vars.start(d)},200)},asNav:{setup:function(){d.asNav=!0,d.animatingTo=Math.floor(d.currentSlide/d.move),d.currentItem=d.currentSlide,d.slides.removeClass(f+"active-slide").eq(d.currentItem).addClass(f+"active-slide"),g?(b._slider=d,d.slides.each(function(){var b=this;b._gesture=new MSGesture,b._gesture.target=b,b.addEventListener("MSPointerDown",function(a){a.preventDefault(),a.currentTarget._gesture&&a.currentTarget._gesture.addPointer(a.pointerId)},!1),b.addEventListener("MSGestureTap",function(b){b.preventDefault();var c=a(this),e=c.index();a(d.vars.asNavFor).data("flexslider").animating||c.hasClass("active")||(d.direction=d.currentItem<e?"next":"prev",d.flexAnimate(e,d.vars.pauseOnAction,!1,!0,!0))})})):d.slides.on(i,function(b){b.preventDefault();var c=a(this),e=c.index(),g=c.offset().left-a(d).scrollLeft();0>=g&&c.hasClass(f+"active-slide")?d.flexAnimate(d.getTarget("prev"),!0):a(d.vars.asNavFor).data("flexslider").animating||c.hasClass(f+"active-slide")||(d.direction=d.currentItem<e?"next":"prev",d.flexAnimate(e,d.vars.pauseOnAction,!1,!0,!0))})}},controlNav:{setup:function(){d.manualControls?p.controlNav.setupManual():p.controlNav.setupPaging()},setupPaging:function(){var b,c,e="thumbnails"===d.vars.controlNav?"control-thumbs":"control-paging",g=1;if(d.controlNavScaffold=a('<ol class="'+f+"control-nav "+f+e+'"></ol>'),d.pagingCount>1)for(var h=0;h<d.pagingCount;h++){if(c=d.slides.eq(h),b="thumbnails"===d.vars.controlNav?'<img src="'+c.attr("data-thumb")+'"/>':"<a>"+g+"</a>","thumbnails"===d.vars.controlNav&&!0===d.vars.thumbCaptions){var k=c.attr("data-thumbcaption");""!=k&&void 0!=k&&(b+='<span class="'+f+'caption">'+k+"</span>")}d.controlNavScaffold.append("<li>"+b+"</li>"),g++}d.controlsContainer?a(d.controlsContainer).append(d.controlNavScaffold):d.append(d.controlNavScaffold),p.controlNav.set(),p.controlNav.active(),d.controlNavScaffold.delegate("a, img",i,function(b){if(b.preventDefault(),""===j||j===b.type){var c=a(this),e=d.controlNav.index(c);c.hasClass(f+"active")||(d.direction=e>d.currentSlide?"next":"prev",d.flexAnimate(e,d.vars.pauseOnAction))}""===j&&(j=b.type),p.setToClearWatchedEvent()})},setupManual:function(){d.controlNav=d.manualControls,p.controlNav.active(),d.controlNav.bind(i,function(b){if(b.preventDefault(),""===j||j===b.type){var c=a(this),e=d.controlNav.index(c);c.hasClass(f+"active")||(d.direction=e>d.currentSlide?"next":"prev",d.flexAnimate(e,d.vars.pauseOnAction))}""===j&&(j=b.type),p.setToClearWatchedEvent()})},set:function(){var b="thumbnails"===d.vars.controlNav?"img":"a";d.controlNav=a("."+f+"control-nav li "+b,d.controlsContainer?d.controlsContainer:d)},active:function(){d.controlNav.removeClass(f+"active").eq(d.animatingTo).addClass(f+"active")},update:function(b,c){d.pagingCount>1&&"add"===b?d.controlNavScaffold.append(a("<li><a>"+d.count+"</a></li>")):1===d.pagingCount?d.controlNavScaffold.find("li").remove():d.controlNav.eq(c).closest("li").remove(),p.controlNav.set(),d.pagingCount>1&&d.pagingCount!==d.controlNav.length?d.update(c,b):p.controlNav.active()}},directionNav:{setup:function(){var b=a('<ul class="'+f+'direction-nav"><li><a class="'+f+'prev" href="#">'+d.vars.prevText+'</a></li><li><a class="'+f+'next" href="#">'+d.vars.nextText+"</a></li></ul>");d.controlsContainer?(a(d.controlsContainer).append(b),d.directionNav=a("."+f+"direction-nav li a",d.controlsContainer)):(d.append(b),d.directionNav=a("."+f+"direction-nav li a",d)),p.directionNav.update(),d.directionNav.bind(i,function(b){b.preventDefault();var c;(""===j||j===b.type)&&(c=d.getTarget(a(this).hasClass(f+"next")?"next":"prev"),d.flexAnimate(c,d.vars.pauseOnAction)),""===j&&(j=b.type),p.setToClearWatchedEvent()})},update:function(){var a=f+"disabled";1===d.pagingCount?d.directionNav.addClass(a).attr("tabindex","-1"):d.vars.animationLoop?d.directionNav.removeClass(a).removeAttr("tabindex"):0===d.animatingTo?d.directionNav.removeClass(a).filter("."+f+"prev").addClass(a).attr("tabindex","-1"):d.animatingTo===d.last?d.directionNav.removeClass(a).filter("."+f+"next").addClass(a).attr("tabindex","-1"):d.directionNav.removeClass(a).removeAttr("tabindex")}},pausePlay:{setup:function(){var b=a('<div class="'+f+'pauseplay"><a></a></div>');d.controlsContainer?(d.controlsContainer.append(b),d.pausePlay=a("."+f+"pauseplay a",d.controlsContainer)):(d.append(b),d.pausePlay=a("."+f+"pauseplay a",d)),p.pausePlay.update(d.vars.slideshow?f+"pause":f+"play"),d.pausePlay.bind(i,function(b){b.preventDefault(),(""===j||j===b.type)&&(a(this).hasClass(f+"pause")?(d.manualPause=!0,d.manualPlay=!1,d.pause()):(d.manualPause=!1,d.manualPlay=!0,d.play())),""===j&&(j=b.type),p.setToClearWatchedEvent()})},update:function(a){"play"===a?d.pausePlay.removeClass(f+"pause").addClass(f+"play").html(d.vars.playText):d.pausePlay.removeClass(f+"play").addClass(f+"pause").html(d.vars.pauseText)}},touch:function(){function a(a){d.animating?a.preventDefault():(window.navigator.msPointerEnabled||1===a.touches.length)&&(d.pause(),q=k?d.h:d.w,s=Number(new Date),u=a.touches[0].pageX,v=a.touches[0].pageY,p=m&&l&&d.animatingTo===d.last?0:m&&l?d.limit-(d.itemW+d.vars.itemMargin)*d.move*d.animatingTo:m&&d.currentSlide===d.last?d.limit:m?(d.itemW+d.vars.itemMargin)*d.move*d.currentSlide:l?(d.last-d.currentSlide+d.cloneOffset)*q:(d.currentSlide+d.cloneOffset)*q,j=k?v:u,o=k?u:v,b.addEventListener("touchmove",c,!1),b.addEventListener("touchend",e,!1))}function c(a){u=a.touches[0].pageX,v=a.touches[0].pageY,r=k?j-v:j-u,t=k?Math.abs(r)<Math.abs(u-o):Math.abs(r)<Math.abs(v-o);var b=500;(!t||Number(new Date)-s>b)&&(a.preventDefault(),!n&&d.transitions&&(d.vars.animationLoop||(r/=0===d.currentSlide&&0>r||d.currentSlide===d.last&&r>0?Math.abs(r)/q+2:1),d.setProps(p+r,"setTouch")))}function e(){if(b.removeEventListener("touchmove",c,!1),d.animatingTo===d.currentSlide&&!t&&null!==r){var a=l?-r:r,f=d.getTarget(a>0?"next":"prev");d.canAdvance(f)&&(Number(new Date)-s<550&&Math.abs(a)>50||Math.abs(a)>q/2)?d.flexAnimate(f,d.vars.pauseOnAction):n||d.flexAnimate(d.currentSlide,d.vars.pauseOnAction,!0)}b.removeEventListener("touchend",e,!1),j=null,o=null,r=null,p=null}function f(a){a.stopPropagation(),d.animating?a.preventDefault():(d.pause(),b._gesture.addPointer(a.pointerId),w=0,q=k?d.h:d.w,s=Number(new Date),p=m&&l&&d.animatingTo===d.last?0:m&&l?d.limit-(d.itemW+d.vars.itemMargin)*d.move*d.animatingTo:m&&d.currentSlide===d.last?d.limit:m?(d.itemW+d.vars.itemMargin)*d.move*d.currentSlide:l?(d.last-d.currentSlide+d.cloneOffset)*q:(d.currentSlide+d.cloneOffset)*q)
}function h(a){a.stopPropagation();var c=a.target._slider;if(c){var d=-a.translationX,e=-a.translationY;return w+=k?e:d,r=w,t=k?Math.abs(w)<Math.abs(-d):Math.abs(w)<Math.abs(-e),a.detail===a.MSGESTURE_FLAG_INERTIA?void setImmediate(function(){b._gesture.stop()}):void((!t||Number(new Date)-s>500)&&(a.preventDefault(),!n&&c.transitions&&(c.vars.animationLoop||(r=w/(0===c.currentSlide&&0>w||c.currentSlide===c.last&&w>0?Math.abs(w)/q+2:1)),c.setProps(p+r,"setTouch"))))}}function i(a){a.stopPropagation();var b=a.target._slider;if(b){if(b.animatingTo===b.currentSlide&&!t&&null!==r){var c=l?-r:r,d=b.getTarget(c>0?"next":"prev");b.canAdvance(d)&&(Number(new Date)-s<550&&Math.abs(c)>50||Math.abs(c)>q/2)?b.flexAnimate(d,b.vars.pauseOnAction):n||b.flexAnimate(b.currentSlide,b.vars.pauseOnAction,!0)}j=null,o=null,r=null,p=null,w=0}}var j,o,p,q,r,s,t=!1,u=0,v=0,w=0;g?(b.style.msTouchAction="none",b._gesture=new MSGesture,b._gesture.target=b,b.addEventListener("MSPointerDown",f,!1),b._slider=d,b.addEventListener("MSGestureChange",h,!1),b.addEventListener("MSGestureEnd",i,!1)):b.addEventListener("touchstart",a,!1)},resize:function(){!d.animating&&d.is(":visible")&&(m||d.doMath(),n?p.smoothHeight():m?(d.slides.width(d.computedW),d.update(d.pagingCount),d.setProps()):k?(d.viewport.height(d.h),d.setProps(d.h,"setTotal")):(d.vars.smoothHeight&&p.smoothHeight(),d.newSlides.width(d.computedW),d.setProps(d.computedW,"setTotal")))},smoothHeight:function(a){if(!k||n){var b=n?d:d.viewport;a?b.animate({height:d.slides.eq(d.animatingTo).height()},a):b.height(d.slides.eq(d.animatingTo).height())}},sync:function(b){var c=a(d.vars.sync).data("flexslider"),e=d.animatingTo;switch(b){case"animate":c.flexAnimate(e,d.vars.pauseOnAction,!1,!0);break;case"play":c.playing||c.asNav||c.play();break;case"pause":c.pause()}},uniqueID:function(b){return b.find("[id]").each(function(){var b=a(this);b.attr("id",b.attr("id")+"_clone")}),b},pauseInvisible:{visProp:null,init:function(){var a=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var b=0;b<a.length;b++)a[b]+"Hidden"in document&&(p.pauseInvisible.visProp=a[b]+"Hidden");if(p.pauseInvisible.visProp){var c=p.pauseInvisible.visProp.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(c,function(){p.pauseInvisible.isHidden()?d.startTimeout?clearTimeout(d.startTimeout):d.pause():d.started?d.play():d.vars.initDelay>0?setTimeout(d.play,d.vars.initDelay):d.play()})}},isHidden:function(){return document[p.pauseInvisible.visProp]||!1}},setToClearWatchedEvent:function(){clearTimeout(e),e=setTimeout(function(){j=""},3e3)}},d.flexAnimate=function(b,c,e,g,i){if(d.vars.animationLoop||b===d.currentSlide||(d.direction=b>d.currentSlide?"next":"prev"),o&&1===d.pagingCount&&(d.direction=d.currentItem<b?"next":"prev"),!d.animating&&(d.canAdvance(b,i)||e)&&d.is(":visible")){if(o&&g){var j=a(d.vars.asNavFor).data("flexslider");if(d.atEnd=0===b||b===d.count-1,j.flexAnimate(b,!0,!1,!0,i),d.direction=d.currentItem<b?"next":"prev",j.direction=d.direction,Math.ceil((b+1)/d.visible)-1===d.currentSlide||0===b)return d.currentItem=b,d.slides.removeClass(f+"active-slide").eq(b).addClass(f+"active-slide"),!1;d.currentItem=b,d.slides.removeClass(f+"active-slide").eq(b).addClass(f+"active-slide"),b=Math.floor(b/d.visible)}if(d.animating=!0,d.animatingTo=b,c&&d.pause(),d.vars.before(d),d.syncExists&&!i&&p.sync("animate"),d.vars.controlNav&&p.controlNav.active(),m||d.slides.removeClass(f+"active-slide").eq(b).addClass(f+"active-slide"),d.atEnd=0===b||b===d.last,d.vars.directionNav&&p.directionNav.update(),b===d.last&&(d.vars.end(d),d.vars.animationLoop||d.pause()),n)h?(d.slides.eq(d.currentSlide).css({opacity:0,zIndex:1}),d.slides.eq(b).css({opacity:1,zIndex:2}),d.wrapup(t)):(d.slides.eq(d.currentSlide).css({zIndex:1}).animate({opacity:0},d.vars.animationSpeed,d.vars.easing),d.slides.eq(b).css({zIndex:2}).animate({opacity:1},d.vars.animationSpeed,d.vars.easing,d.wrapup));else{var q,r,s,t=k?d.slides.filter(":first").height():d.computedW;m?(q=d.vars.itemMargin,s=(d.itemW+q)*d.move*d.animatingTo,r=s>d.limit&&1!==d.visible?d.limit:s):r=0===d.currentSlide&&b===d.count-1&&d.vars.animationLoop&&"next"!==d.direction?l?(d.count+d.cloneOffset)*t:0:d.currentSlide===d.last&&0===b&&d.vars.animationLoop&&"prev"!==d.direction?l?0:(d.count+1)*t:l?(d.count-1-b+d.cloneOffset)*t:(b+d.cloneOffset)*t,d.setProps(r,"",d.vars.animationSpeed),d.transitions?(d.vars.animationLoop&&d.atEnd||(d.animating=!1,d.currentSlide=d.animatingTo),d.container.unbind("webkitTransitionEnd transitionend"),d.container.bind("webkitTransitionEnd transitionend",function(){d.wrapup(t)})):d.container.animate(d.args,d.vars.animationSpeed,d.vars.easing,function(){d.wrapup(t)})}d.vars.smoothHeight&&p.smoothHeight(d.vars.animationSpeed)}},d.wrapup=function(a){n||m||(0===d.currentSlide&&d.animatingTo===d.last&&d.vars.animationLoop?d.setProps(a,"jumpEnd"):d.currentSlide===d.last&&0===d.animatingTo&&d.vars.animationLoop&&d.setProps(a,"jumpStart")),d.animating=!1,d.currentSlide=d.animatingTo,d.vars.after(d)},d.animateSlides=function(){!d.animating&&q&&d.flexAnimate(d.getTarget("next"))},d.pause=function(){clearInterval(d.animatedSlides),d.animatedSlides=null,d.playing=!1,d.vars.pausePlay&&p.pausePlay.update("play"),d.syncExists&&p.sync("pause")},d.play=function(){d.playing&&clearInterval(d.animatedSlides),d.animatedSlides=d.animatedSlides||setInterval(d.animateSlides,d.vars.slideshowSpeed),d.started=d.playing=!0,d.vars.pausePlay&&p.pausePlay.update("pause"),d.syncExists&&p.sync("play")},d.stop=function(){d.pause(),d.stopped=!0},d.canAdvance=function(a,b){var c=o?d.pagingCount-1:d.last;return b?!0:o&&d.currentItem===d.count-1&&0===a&&"prev"===d.direction?!0:o&&0===d.currentItem&&a===d.pagingCount-1&&"next"!==d.direction?!1:a!==d.currentSlide||o?d.vars.animationLoop?!0:d.atEnd&&0===d.currentSlide&&a===c&&"next"!==d.direction?!1:d.atEnd&&d.currentSlide===c&&0===a&&"next"===d.direction?!1:!0:!1},d.getTarget=function(a){return d.direction=a,"next"===a?d.currentSlide===d.last?0:d.currentSlide+1:0===d.currentSlide?d.last:d.currentSlide-1},d.setProps=function(a,b,c){var e=function(){var c=a?a:(d.itemW+d.vars.itemMargin)*d.move*d.animatingTo,e=function(){if(m)return"setTouch"===b?a:l&&d.animatingTo===d.last?0:l?d.limit-(d.itemW+d.vars.itemMargin)*d.move*d.animatingTo:d.animatingTo===d.last?d.limit:c;switch(b){case"setTotal":return l?(d.count-1-d.currentSlide+d.cloneOffset)*a:(d.currentSlide+d.cloneOffset)*a;case"setTouch":return l?a:a;case"jumpEnd":return l?a:d.count*a;case"jumpStart":return l?d.count*a:a;default:return a}}();return-1*e+"px"}();d.transitions&&(e=k?"translate3d(0,"+e+",0)":"translate3d("+e+",0,0)",c=void 0!==c?c/1e3+"s":"0s",d.container.css("-"+d.pfx+"-transition-duration",c),d.container.css("transition-duration",c)),d.args[d.prop]=e,(d.transitions||void 0===c)&&d.container.css(d.args),d.container.css("transform",e)},d.setup=function(b){if(n)d.slides.css({width:"100%","float":"left",marginRight:"-100%",position:"relative"}),"init"===b&&(h?d.slides.css({opacity:0,display:"block",webkitTransition:"opacity "+d.vars.animationSpeed/1e3+"s ease",zIndex:1}).eq(d.currentSlide).css({opacity:1,zIndex:2}):d.slides.css({opacity:0,display:"block",zIndex:1}).eq(d.currentSlide).css({zIndex:2}).animate({opacity:1},d.vars.animationSpeed,d.vars.easing)),d.vars.smoothHeight&&p.smoothHeight();else{var c,e;"init"===b&&(d.viewport=a('<div class="'+f+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(d).append(d.container),d.cloneCount=0,d.cloneOffset=0,l&&(e=a.makeArray(d.slides).reverse(),d.slides=a(e),d.container.empty().append(d.slides))),d.vars.animationLoop&&!m&&(d.cloneCount=2,d.cloneOffset=1,"init"!==b&&d.container.find(".clone").remove(),d.container.append(d.slides.first().clone().addClass("clone").attr("aria-hidden","true")).prepend(d.slides.last().clone().addClass("clone").attr("aria-hidden","true")),p.uniqueID(d.slides.first().clone().addClass("clone")).appendTo(d.container),p.uniqueID(d.slides.last().clone().addClass("clone")).prependTo(d.container)),d.newSlides=a(d.vars.selector,d),c=l?d.count-1-d.currentSlide+d.cloneOffset:d.currentSlide+d.cloneOffset,k&&!m?(d.container.height(200*(d.count+d.cloneCount)+"%").css("position","absolute").width("100%"),setTimeout(function(){d.newSlides.css({display:"block"}),d.doMath(),d.viewport.height(d.h),d.setProps(c*d.h,"init")},"init"===b?100:0)):(d.container.width(200*(d.count+d.cloneCount)+"%"),d.setProps(c*d.computedW,"init"),setTimeout(function(){d.doMath(),d.newSlides.css({width:d.computedW,"float":"left",display:"block"}),d.vars.smoothHeight&&p.smoothHeight()},"init"===b?100:0))}m||d.slides.removeClass(f+"active-slide").eq(d.currentSlide).addClass(f+"active-slide"),d.vars.init(d)},d.doMath=function(){var a=d.slides.first(),b=d.vars.itemMargin,c=d.vars.minItems,e=d.vars.maxItems;d.w=void 0===d.viewport?d.width():d.viewport.width(),d.h=a.height(),d.boxPadding=a.outerWidth()-a.width(),m?(d.itemT=d.vars.itemWidth+b,d.minW=c?c*d.itemT:d.w,d.maxW=e?e*d.itemT-b:d.w,d.itemW=d.minW>d.w?(d.w-b*(c-1))/c:d.maxW<d.w?(d.w-b*(e-1))/e:d.vars.itemWidth>d.w?d.w:d.vars.itemWidth,d.visible=Math.floor(d.w/d.itemW),d.move=d.vars.move>0&&d.vars.move<d.visible?d.vars.move:d.visible,d.pagingCount=Math.ceil((d.count-d.visible)/d.move+1),d.last=d.pagingCount-1,d.limit=1===d.pagingCount?0:d.vars.itemWidth>d.w?d.itemW*(d.count-1)+b*(d.count-1):(d.itemW+b)*d.count-d.w-b):(d.itemW=d.w,d.pagingCount=d.count,d.last=d.count-1),d.computedW=d.itemW-d.boxPadding},d.update=function(a,b){d.doMath(),m||(a<d.currentSlide?d.currentSlide+=1:a<=d.currentSlide&&0!==a&&(d.currentSlide-=1),d.animatingTo=d.currentSlide),d.vars.controlNav&&!d.manualControls&&("add"===b&&!m||d.pagingCount>d.controlNav.length?p.controlNav.update("add"):("remove"===b&&!m||d.pagingCount<d.controlNav.length)&&(m&&d.currentSlide>d.last&&(d.currentSlide-=1,d.animatingTo-=1),p.controlNav.update("remove",d.last))),d.vars.directionNav&&p.directionNav.update()},d.addSlide=function(b,c){var e=a(b);d.count+=1,d.last=d.count-1,k&&l?void 0!==c?d.slides.eq(d.count-c).after(e):d.container.prepend(e):void 0!==c?d.slides.eq(c).before(e):d.container.append(e),d.update(c,"add"),d.slides=a(d.vars.selector+":not(.clone)",d),d.setup(),d.vars.added(d)},d.removeSlide=function(b){var c=isNaN(b)?d.slides.index(a(b)):b;d.count-=1,d.last=d.count-1,isNaN(b)?a(b,d.slides).remove():k&&l?d.slides.eq(d.last).remove():d.slides.eq(b).remove(),d.doMath(),d.update(c,"remove"),d.slides=a(d.vars.selector+":not(.clone)",d),d.setup(),d.vars.removed(d)},p.init()},a(window).blur(function(){focused=!1}).focus(function(){focused=!0}),a.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:!1,animationLoop:!0,smoothHeight:!1,startAt:0,slideshow:!0,slideshowSpeed:7e3,animationSpeed:600,initDelay:0,randomize:!1,thumbCaptions:!1,pauseOnAction:!0,pauseOnHover:!1,pauseInvisible:!0,useCSS:!0,touch:!0,video:!1,controlNav:!0,directionNav:!0,prevText:"Previous",nextText:"Next",keyboard:!0,multipleKeyboard:!1,mousewheel:!1,pausePlay:!1,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:1,maxItems:0,move:0,allowOneSlide:!0,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){},init:function(){}},a.fn.flexslider=function(b){if(void 0===b&&(b={}),"object"==typeof b)return this.each(function(){var c=a(this),d=b.selector?b.selector:".slides > li",e=c.find(d);1===e.length&&b.allowOneSlide===!0||0===e.length?(e.fadeIn(400),b.start&&b.start(c)):void 0===c.data("flexslider")&&new a.flexslider(this,b)});var c=a(this).data("flexslider");switch(b){case"play":c.play();break;case"pause":c.pause();break;case"stop":c.stop();break;case"next":c.flexAnimate(c.getTarget("next"),!0);break;case"prev":case"previous":c.flexAnimate(c.getTarget("prev"),!0);break;default:"number"==typeof b&&c.flexAnimate(b,!0)}}}(jQuery),$(window).load(function(){function a(){var a=0;b.css("min-height",""),b.find(".media").css("min-height",""),b.each(function(){$(this).outerHeight()>a&&(a=$(this).outerHeight())}),b.css("min-height",a),b.find(".media").css("min-height",a-64-72)}var b=$(".flexslider .slides li");b.length>1&&(a(),$(window).resize(function(){a()}),setTimeout(function(){a()},50))}),$(document).ready(function(){var a=new window.keypress.Listener;a.sequence_combo("up up down down left right left right b a",function(){window.location="http://edispilf.org"}),a.sequence_combo("f l i p s i d e",function(){alert("Hello! :)")})}),$(document).ready(function(){$(".toggle").click(function(a){a.stopPropagation(),a.preventDefault();var b=$(this).siblings(".links");$(".links").not(b).removeClass("visible"),b.toggleClass("visible")}),$(document).click(function(){$(".links").removeClass("visible")})}),$(document).ready(function(){function a(a,d){"0px"!=$("#site-title img").css("font-size")&&(b("next"),b("previous"));var f=$("#site-body > article:first-child");d.click(function(a){var b=$(this);if(b.hasClass("inactive"))return void a.preventDefault();if(!e.next)return!0;a.preventDefault(),b.addClass("loading");var d=$("article.next-post");c(f,d,"left",b.attr("href"))}),a.click(function(a){var b=$(this);if(b.hasClass("inactive"))return void a.preventDefault();if(!e.previous)return!0;a.preventDefault(),b.addClass("loading");var d=$("article.previous-post");c(f,d,"right",b.attr("href"))});var g=new window.keypress.Listener;g.simple_combo("right",function(){d.click()}),g.simple_combo("left",function(){a.click()})}function b(a){var b=d.find("."+a).attr("href");"#"!=b&&(console.log("Ajaxing "+a+": "+b),$.ajax({url:b}).done(function(b){e[a]=!0;var c=$("<div>").html(b),d=c.find("#site-body > article");d.addClass(a+"-post").css("top",0),$("#site-body").append(d)}))}function c(a,b,c,d){if(f)return!1;f=!0;var e={banner_speed:250,sliding_speed:750},g=a.find(".banner"),h=b.find(".banner"),i=g.outerHeight(),j=h.outerHeight(),k=b.outerHeight(),l=$("#site-body").outerHeight()-$("#site-body").height();async.auto({slide_to_top:function(a){$("html, body").animate({scrollTop:0},e.banner_speed,function(){a(null)})},animate_banner:function(a){j>i?(console.log("animate_banner : current banner smaller"),g.animate({height:j},e.banner_speed,function(){a(null)})):i>j?(console.log("animate_banner : sliding banner smaller"),h.height(g.height()),a(null)):(console.log("animate_banner : banner equal"),a(null))},animate_body:function(c){a.height()<b.height()?(console.log("animate_body : current body smaller"),$("#site-body").height(a.height()),$("#site-body").animate({height:k+l},e.banner_speed,function(){c(null)})):(console.log("animate_body : sliding body equal or smaller"),c(null))},slide:["slide_to_top","animate_banner","animate_body",function(d){var f={};f[c]="0%",b.animate(f,e.sliding_speed,function(){d(null)}),f={},f[c]="-100%",a.animate(f,e.sliding_speed)}],animate_banner_original:["slide",function(a){h.height()!=j?(console.log("animate_banner_original : animating"),h.animate({height:j},e.banner_speed,function(){a(null)})):(console.log("animate_banner_original : same size"),a(null))}],animate_body_original:["slide",function(c){b.height()<a.height()?$("#site-body").animate({height:k+l},e.banner_speed,function(){c(null)}):c(null)}],change_url:["animate_banner_original","animate_body_original",function(){console.log("change_url"),window.location=d}]})}var d=[],e={previous:!1,next:!1},f=!1;if(d=$(".notes-navigation").length>0?$(".notes-navigation"):d,d=$(".projects-navigation").length>0?$(".projects-navigation"):d,d.length>=1){var g=d.find(".previous"),h=d.find(".next");a(g,h)}}),$(document).ready(function(){$(".flexslider").flexslider({animation:"slide",useCSS:!0,animationLoop:!1})});